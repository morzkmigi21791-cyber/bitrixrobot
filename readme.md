Bitrix24 REST-Robot


Описание:
---------
Проект реализует локальное приложение на FastAPI для интеграции с Bitrix24. 
Позволяет создавать REST-робота, который автоматически добавляет контакты в CRM с 5 полями:
- Фамилия (LAST_NAME)
- Имя (NAME)
- Отчество (SECOND_NAME)
- Телефон (PHONE)
- Email (EMAIL)

Функционал:
-----------
1. OAuth2 авторизация Bitrix24.
2. Сохранение токенов доступа.
3. Создание REST-робота с уникальным CODE.
4. Обработка POST-запросов от робота:
   - Извлечение данных контакта из `properties[...]`.
   - Создание контакта через CRM API.
5. Проверка и удаление старого робота при переустановке.
6. Логи всех операций.

Структура проекта:
-----------------
auth.py      - маршруты и функции для OAuth и создания робота
main.py      - основной FastAPI сервер и обработка REST-робота
.env         - переменные окружения:
                CLIENT_ID
                CLIENT_SECRET
                HOST_URL
                ALLOWED_EVENT_TOKEN (необязательно)
tokens.json  - сохраняет access_token, refresh_token и domain
README.txt   - описание проекта

Как запустить:
--------------
1. Установите зависимости:
   pip install fastapi requests python-dotenv uvicorn

2. Настройте `.env` с вашими данными Bitrix24:
   CLIENT_ID, CLIENT_SECRET, HOST_URL

3. Запуск сервера:
   uvicorn main:app --reload --host 0.0.0.0 --port 8000

4. Перейдите в браузере на:
   http://localhost:8000/bitrix/oauth/install
   для установки приложения и создания робота.

Примечания:
------------
- Отчество (`SECOND_NAME`) сохраняется через REST API, убедитесь, что поле включено в CRM.
- Код робота генерируется уникальным при каждой установке, чтобы избежать конфликта "Activity already installed".
- Логи сохраняются в консоль, показывают токены, запросы и ответы Bitrix24.
- файл clean.py стирает всех роботов

=======================================================
